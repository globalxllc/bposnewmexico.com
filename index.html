<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Broker Price Opinion (BPO) Intake</title>
<style>
:root{
  --bg:#000;
  --text:#fff;
  --muted:#9aa0a6;
  --accent:#16a34a;
}
*{box-sizing:border-box}
html,body{height:100%;background:var(--bg);color:var(--text);margin:0;overflow-x:hidden;}
/* Page container for all content except hero */
#pageWrap{width:100%;max-width:1400px;margin:0 auto;padding:0 16px 48px;}
/* Full-bleed hero wrapper */
.hero-bleed{width:100vw;position:relative;left:50%;right:50%;margin-left:-50vw;margin-right:-50vw;background:#000;}
.hero-bleed video{display:block;width:100%;height:auto;max-height:86vh;object-fit:cover;}
/* Unmute button */
.unmute-btn{
  position:absolute;left:50%;bottom:12px;transform:translateX(-50%);
  background:#1d4ed8;color:#fff;border:none;border-radius:999px;
  padding:12px 22px;font-size:18px;cursor:pointer;box-shadow:0 4px 16px rgba(0,0,0,.35);
}
.unmute-btn:focus{outline:2px solid rgba(255,255,255,.6);outline-offset:2px}
/* Split layout after hero: left media + right intake */
#splitLayout{display:none;gap:28px;align-items:flex-start;margin-top:24px;}
.left-col{flex:1 1 auto;min-width:0;}
.right-col{flex:0 0 540px;width:540px;max-width:540px;position:sticky;top:16px;align-self:flex-start;}
@media (max-width:1100px){
  .right-col{position:static;width:100%;max-width:100%;}
  #splitLayout{flex-direction:column;}
}
/* Media blocks on the left */
.media-block{width:100%;margin:0 0 22px 0;}
.media-block video,.media-block img{width:100%;height:auto;display:block;border-radius:8px}
/* Intake form styling (kept like white boxes) */
.form-container{background:transparent;padding:0;}
.form-container h2{margin:0 0 10px 0;font-size:24px}
.form-container p.helper{margin:0 0 10px 0;color:rgba(255,255,255,.7);font-size:12px}
.form-row{margin:8px 0}
label{display:block;margin:0 0 6px 2px;font-size:13px;color:rgba(255,255,255,.75)}
.text-input, .form-container input[type="text"], .form-container input[type="email"], .form-container input[type="tel"], .form-container textarea{
  width:100%;padding:10px 12px;border:1px solid rgba(255,255,255,.25);border-radius:4px;background:#fff;color:#111;font-size:14px;
}
.form-container textarea{min-height:110px;resize:vertical}
/* File upload matches other inputs */
.form-container input[type="file"].file-input{
  width:100%;padding:10px 12px;border:1px solid rgba(255,255,255,.25);
  border-radius:4px;background:#fff;color:#111;
}
.form-container input[type="file"].file-input::-webkit-file-upload-button,
.form-container input[type="file"].file-input::file-selector-button{
  background:#e9ecef;border:1px solid rgba(0,0,0,.2);border-radius:4px;padding:8px 12px;margin-right:10px;cursor:pointer;
}
.submit-btn{
  display:inline-block;width:100%;padding:10px 14px;background:var(--accent);color:#fff;border:none;border-radius:4px;cursor:pointer;
  font-weight:600;
}
.small-note{margin-top:8px;color:rgba(255,255,255,.7);font-size:12px}
/* Utility */
.stack{display:flex;flex-direction:column}
.flex{display:flex}
.center{display:flex;justify-content:center;align-items:center}
/* Prevent any inner horizontal scrollbars */
.form-container{overflow-x:hidden}
</style>
</head>
<body>

<!-- HERO (full-bleed) -->
<section class="hero-bleed" id="hero">
  <video id="video1" playsinline muted autoplay controls>
    <source src="https://res.cloudinary.com/ds5kbupzc/video/upload/video1_fixed_kjltks.mp4" type="video/mp4">
  </video>
  <button id="unmute1" class="unmute-btn">Unmute</button>
</section>

<div id="pageWrap">

  <!-- Split layout -->
  <div id="splitLayout" class="flex">
    <!-- Left column: Video 2 -> Map -> Video 3 -->
    <div class="left-col">
      <section id="video2Section" class="media-block">
        <video id="video2" playsinline muted autoplay controls>
          <source src="https://res.cloudinary.com/ds5kbupzc/video/upload/v1754981683/video2C_fixed_gcuiql.mp4" type="video/mp4">
        </video>
      </section>

      <section id="mapSection" class="media-block" style="display:none;">
        <img id="nmMap" src="assets/Portrait MAP New Mexico Counties.jpg" alt="New Mexico counties map">
      </section>

      <section id="video3Section" class="media-block" style="display:none;">
        <video id="video3" playsinline muted autoplay controls>
          <source src="https://res.cloudinary.com/ds5kbupzc/video/upload/v1754951208/Order_Quote_Process_Elisabetta_US_English_Cropped_s2lz8l.mp4" type="video/mp4">
        </video>
      </section>
    </div>

    <!-- Right column: intake form -->
    <aside class="right-col">
      <div class="form-container">
        <h2>Broker Price Opinion (BPO) Intake</h2>
        <p class="helper">Please insert details below to submit.</p>
        <form action="https://formspree.io/f/manbdzgp" method="POST" enctype="multipart/form-data">
          <div class="form-row">
            <label>Subject Property Address</label>
            <div class="flex" style="gap:8px;">
              <input class="text-input" type="text" name="Street Address" placeholder="Street Address" required>
              <input class="text-input" type="text" name="City/Town" placeholder="City/Town" required style="max-width:200px">
              <input class="text-input" type="text" name="NM Zip" placeholder="NM Zip" required style="max-width:120px">
            </div>
          </div>

          <div class="form-row"><input class="text-input" type="text" name="County Assessor Owner" placeholder="County Assessorâ€™s Owner Name"></div>
          <div class="form-row"><input class="text-input" type="text" name="Ordering Company or Person" placeholder="Company or Person Ordering Name"></div>
          <div class="form-row"><input class="text-input" type="email" name="Contact Email" placeholder="Your Contact Email" required></div>
          <div class="form-row"><input class="text-input" type="tel" name="Contact Phone" placeholder="Your Contact Phone" required></div>
          <div class="form-row"><textarea class="text-input" name="Additional Details" placeholder="Additional Details"></textarea></div>

          <div class="form-row">
            <label>Attach file(s) (.jpg or .pdf)</label>
            <input type="file" name="attachments" accept=".jpg,.jpeg,application/pdf" multiple class="text-input file-input">
          </div>

          <button type="submit" class="submit-btn">Submit BPO Request</button>
          <div class="small-note">Optional: BPOsNewMexico.com direct phone: 505-453-0444</div>
        </form>
      </div>
    </aside>
  </div><!-- /splitLayout -->

</div><!-- /pageWrap -->

<script>
// --- Hero unmute and reveal split layout after v1 ends
const v1 = document.getElementById('video1');
const unmute1 = document.getElementById('unmute1');
const split = document.getElementById('splitLayout');

function revealSplit(){ split.style.display='flex'; }
v1.addEventListener('ended', revealSplit);

// Unmute + ensure playback (Edge/Safari gesture-friendly)
unmute1.addEventListener('click', async () => {
  try { v1.muted = false; await v1.play(); } catch(e){ /* ignore */ }
  unmute1.style.display='none';
});

// --- V2 -> Map (2.5s) -> V3 sequence
const v2 = document.getElementById('video2');
const map = document.getElementById('mapSection');
const v3s = document.getElementById('video3Section');
const v3 = document.getElementById('video3');

v2.addEventListener('ended', () => {
  // show map
  map.style.display = 'block';
  // wait 2500ms then show v3
  setTimeout(() => {
    map.style.display = 'none';
    v3s.style.display = 'block';
    v3.play().catch(()=>{});
  }, 2500);
});

// Start v2 only once split is visible (in case of fast network)
const onReveal = () => { if (split.style.display === 'flex') v2.play().catch(()=>{}); };
document.addEventListener('DOMContentLoaded', onReveal);

// Defensive: ensure no duplicate map
document.addEventListener('DOMContentLoaded', () => {
  const bubbles = document.querySelectorAll('.map-bubble, #mapBubbleContainer');
  bubbles.forEach(b => b.remove());
});
</script>
</body>
</html>
