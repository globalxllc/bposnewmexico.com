<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BPOs New Mexico & Arizona — Broker Price Opinions</title>
  <style>
    :root {
      --brand-blue: #1e90ff;
      --ink: #14213d;
      --bg: #f7f7fb;
      --card: #ffffff;
      --muted: #6b7280;
      --radius: 14px;
      --shadow: 0 8px 30px rgba(2, 8, 20, 0.08);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: var(--ink); background: var(--bg);
    }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 20px; }

    /* HERO */
    .hero {
      position: relative; border-radius: var(--radius); overflow: hidden;
      background: #000; box-shadow: var(--shadow);
    }
    .hero video { width: 100%; height: auto; display: block; }
    .hero .overlay {
      position: absolute; inset: 0; display: grid; place-items: center;
      background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.35));
      color: white; text-align: center; padding: 24px;
    }
    .hero h1 { margin: 0; font-size: clamp(22px, 3vw, 42px); font-weight: 800; }
    .hero p { margin: 10px 0 0; font-size: clamp(14px, 2vw, 18px); color: #e5e7eb; }

    /* Unmute button (sole audio control) */
    #unmuteBtn {
      position: fixed; z-index: 40; right: 16px; top: 16px; padding: 12px 18px;
      border: none; border-radius: 999px; background: var(--brand-blue); color: #fff;
      font-weight: 700; cursor: pointer; box-shadow: var(--shadow);
    }
    #unmuteBtn:active { transform: translateY(1px); }
    #unmuteBtn[hidden] { display: none !important; }

    /* MAIN GRID: Map (left), Bubble video (middle), Intake (right) */
    .tri-grid { display: grid; grid-template-columns: 320px 1fr 420px; gap: 18px; margin-top: 22px; }
    @media (max-width: 1100px) { .tri-grid { grid-template-columns: 280px 1fr 380px; } }
    @media (max-width: 960px) { .tri-grid { grid-template-columns: 1fr; } }

    .card { background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; }
    .pad { padding: 18px; }

    /* Map card */
    .map-box { display: grid; place-items: center; }
    .map-box img { width: 100%; max-width: 320px; height: auto; display: block; }
    .map-note { color: var(--muted); font-size: 12px; text-align: center; margin-top: 8px; }

    /* Bubble video area */
    .bubble-wrap { position: relative; min-height: 340px; display: grid; place-items: center; }
    .bubble {
      width: clamp(220px, 40vw, 360px); aspect-ratio: 1 / 1; border-radius: 999px; overflow: hidden;
      box-shadow: 0 10px 35px rgba(0,0,0,.18);
    }
    .bubble video { width: 100%; height: 100%; object-fit: cover; display: block; }

    /* Intake form */
    .form h2 { margin: 0 0 8px; font-size: 22px; }
    .form p { margin: 0 0 16px; color: var(--muted); }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 540px) { .row { grid-template-columns: 1fr; } }
    label { display: block; font-size: 13px; color: var(--muted); margin-bottom: 6px; }
    input, select, textarea {
      width: 100%; padding: 12px 12px; border: 1px solid #e5e7eb; border-radius: 10px; font: inherit;
      background: #fff; outline: none;
    }
    textarea { min-height: 110px; resize: vertical; }
    .submit {
      margin-top: 12px; display: inline-flex; align-items: center; gap: 8px; padding: 12px 16px;
      background: var(--ink); color: #fff; border: 0; border-radius: 12px; cursor: pointer; font-weight: 700;
    }

    /* Second video section (scroll target) */
    .section { margin-top: 32px; }
    .section h3 { margin: 0 0 8px; }
    .vframe { border-radius: var(--radius); overflow: hidden; background: #000; box-shadow: var(--shadow); }
    .vframe video { width: 100%; display: block; }

    footer { text-align: center; color: var(--muted); font-size: 12px; padding: 32px 0 20px; }
  </style>
</head>
<body>
  <!-- Sole audio control -->
  <button id="unmuteBtn" aria-label="Unmute site audio">Unmute</button>

  <div class="wrap">
    <!-- HERO with video #1 -->
    <section class="hero" id="hero">
      <video id="video1" preload="metadata" playsinline muted autoplay>
        <source src="https://res.cloudinary.com/ds5kbupzc/video/upload/v1754463161/Order_Quote_Process_720_dlow7x.mp4" type="video/mp4" />
      </video>
      <div class="overlay">
        <div>
          <h1>Order a Broker Price Opinion (BPO)</h1>
          <p>New Mexico • Arizona — PMI removal, FMV checks, exterior/interior BPOs</p>
        </div>
      </div>
    </section>

    <!-- Main grid: Map • Bubble video • Intake form -->
    <section class="tri-grid" aria-label="Order area">
      <!-- NM map, kept smaller & pinned to the left -->
      <aside class="card pad map-box">
        <img id="nmMap" src="assets/nm-map.png" alt="New Mexico map" />
        <div class="map-note">Map pinned left to leave room for bubble video & form</div>
      </aside>

      <!-- Bubble video centered between map & intake -->
      <div class="card pad bubble-wrap">
        <div class="bubble" aria-label="Intro bubble video">
          <video id="bubbleVideo" playsinline muted autoplay loop preload="metadata">
            <source src="assets/Order_Quote_Process_Elisabetta_Cropped.mp4?v=1" type="video/mp4" />
          </video>
        </div>
      </div>

      <!-- Intake form -->
      <aside class="card pad form" id="intake">
        <h2>Start Your BPO</h2>
        <p>We’ll email you a custom quote (fee depends on access, distance, and complexity).</p>
        <form id="bpoForm" action="#" method="post">
          <div class="row">
            <div>
              <label for="name">Full name</label>
              <input id="name" name="name" required />
            </div>
            <div>
              <label for="email">Email</label>
              <input id="email" name="email" type="email" required />
            </div>
          </div>
          <div class="row">
            <div>
              <label for="phone">Phone</label>
              <input id="phone" name="phone" />
            </div>
            <div>
              <label for="service">Service type</label>
              <select id="service" name="service">
                <option>Exterior BPO</option>
                <option>Interior BPO</option>
                <option>PMI removal analysis</option>
                <option>FMV / Desk Review</option>
              </select>
            </div>
          </div>
          <label for="address" style="margin-top:12px; display:block;">Property address</label>
          <input id="address" name="address" placeholder="Street, City, State" />

          <label for="notes" style="margin-top:12px; display:block;">Notes</label>
          <textarea id="notes" name="notes" placeholder="Access, timelines, special instructions…"></textarea>

          <button class="submit" type="submit">Request Quote</button>
        </form>
      </aside>
    </section>

    <!-- Second video (scroll target when the first ends) -->
    <section class="section" id="video2Section" aria-label="More info video">
      <h3>How Your BPO Is Completed</h3>
      <div class="vframe">
        <video id="video2" playsinline muted controls preload="metadata">
          <source src="https://res.cloudinary.com/ds5kbupzc/video/upload/v1754463161/Order_Quote_Process_720_dlow7x.mp4" type="video/mp4" />
        </video>
      </div>
    </section>

    <footer>
      © <span id="yr"></span> BPOS New Mexico • Arizona — Licensed Real Estate Broker
    </footer>
  </div>

  <script>
    // Footer year
    document.getElementById('yr').textContent = new Date().getFullYear();

    // Make sure all videos start muted (policy-friendly), and reveal Unmute button once media is ready
    const unmuteBtn = document.getElementById('unmuteBtn');
    const videos = Array.from(document.querySelectorAll('video'));
    videos.forEach(v => { v.muted = true; v.volume = 0; });

    // Only show the Unmute control if at least one video has audio tracks
    Promise.allSettled(videos.map(v => v.play?.())).finally(() => {
      unmuteBtn.hidden = false;
    });

    unmuteBtn.addEventListener('click', () => {
      videos.forEach(v => { v.muted = false; v.volume = 1; });
      unmuteBtn.hidden = true; // Sole control: hide after unmuting
    });

    // Smooth-scroll to the second video the moment the first finishes
    const v1 = document.getElementById('video1');
    const v2Section = document.getElementById('video2Section');
    if (v1 && v2Section) {
      v1.addEventListener('ended', () => {
        v2Section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    }

    // Basic (front-end) submit handler — replace with your emailer / Netlify form / serverless
    const form = document.getElementById('bpoForm');
    form?.addEventListener('submit', (e) => {
      e.preventDefault();
      alert('Thanks! We\'ll email a custom quote shortly.');
      form.reset();
    });
  </script>
</body>
</html>
